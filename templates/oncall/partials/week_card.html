<div id="oncall-week-{{ week.year }}-{{ week.week }}"
     class="card {% if week.is_current %}ring-2 ring-gold-400{% endif %}">
  <div class="flex items-center justify-between mb-2">
    <h3 class="text-sm font-semibold text-sand-800 dark:text-sand-100">
      Uge {{ week.week }}, {{ week.year }}
    </h3>
    {% if week.is_current %}
      <span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gold-100 text-gold-800 dark:bg-gold-900 dark:text-gold-200">
        Denne uge
      </span>
    {% endif %}
  </div>
  <p class="text-xs text-sand-500 dark:text-sand-400 mb-3">
    {{ week.monday|date:"d/m" }} - {{ week.sunday|date:"d/m" }}
  </p>

  {% if week.duty %}
    <div class="flex items-center justify-between">
      <div class="flex items-center space-x-2">
        <svg class="w-4 h-4 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
        </svg>
        <span class="text-sm font-medium text-sand-700 dark:text-sand-200">
          {{ week.duty.user.get_full_name|default:week.duty.user.username }}
        </span>
      </div>
      {% if week.is_own %}
        <button hx-post="{% url 'oncall:release' week.year week.week %}"
                hx-target="#oncall-week-{{ week.year }}-{{ week.week }}"
                hx-swap="outerHTML"
                class="text-xs px-2 py-1 rounded bg-red-100 text-red-700 hover:bg-red-200 dark:bg-red-900 dark:text-red-200 dark:hover:bg-red-800 transition-colors">
          Frigiv
        </button>
      {% endif %}
    </div>
  {% else %}
    <div class="flex items-center justify-between">
      <span class="text-sm text-sand-400 dark:text-sand-500 italic">Ledig</span>
      <button hx-post="{% url 'oncall:claim' week.year week.week %}"
              hx-target="#oncall-week-{{ week.year }}-{{ week.week }}"
              hx-swap="outerHTML"
              class="text-xs px-2 py-1 rounded bg-green-100 text-green-700 hover:bg-green-200 dark:bg-green-900 dark:text-green-200 dark:hover:bg-green-800 transition-colors">
        Tag vagt
      </button>
    </div>
  {% endif %}
</div>
